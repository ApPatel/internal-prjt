
<% @sub_category_name=@sub_category.name %>
<div class="searchbox">
 <div class="field">
    <%= label_tag :'Search' %><br />
    <%= text_field_tag :search %>
  </div>
   <input type="button" name="Go"  value="Go" onclick="search(<%=@sub_category.id%>)" /> 
 </div>
<div class="listheading"><div class="fontstyling">
<h2>Listing events for the Category :<%="#{@sub_category_name}"%></h2></div>
</div>
<div class="listheading"><div class="fontstyling">
<h3>You searched with keyword :"<%="#{params[:search]}"%>"</h3></div>
</div>
<% if @events.empty? %>
<div class="noevents"><h6>No events matching the keyword</h6></div>
<% else%>
<table class="tablesorter" id="my_table">
    <thead>

   
  <tr>
    <th>Event</th>
    <th>Agenda</th>
    <th>Description</th>
    <th>Attachment</th>
    <th>Event date</th>
    
    <th>Event Category</th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
<% @events.each do |event| %>
  <tr>
    <td id="category"><%= event.name %></td>
    <td><%= event.agenda %></td>
    <td><%= event.description %></td>
    <% if event.attachment_file %>
    <td><%= link_to "#{event.attachment_file}",download_file_event_path(event)%></td>
    <% else %>
    <td>No Attachment </td>
    <% end %>
    <td><%= event.event_date %></td>
     <%  @sub_category = SubCategory.find(event.sub_category_id)%>
     <td id="category"><%= link_to "#{@sub_category.name}",sub_category_path %></td>
   
   
      
 
    <td><%= link_to 'Event page', event %></td>
    <% unless event.event_date < Date.today %>
    <td><%= link_to 'Edit Event', edit_event_path(event) %></td>
    <td><%= link_to 'Delete Event', event, method: :delete, data: { confirm: 'Are you sure to delete the event?' } %></td>
    <% else %>
    <td>Event has occurred<td></td>
    <% end %>
   
  </tr>
<% end %>
</tbody>
</table>
<% end%>

<%= paginate @events%>


<script type="text/javascript">
 $(document).ready(function()
    {
     
        $("#my_table").tablesorter();
    }
);

</script>